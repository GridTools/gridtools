

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; GridTools 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/cscs.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GridTools 1.0.0 documentation" href="../index.html"/>
        <link rel="next" title="Getting Started" href="../getting_started/getting_started.html"/>
        <link rel="prev" title="Indices and tables" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GridTools
          

          
            
            <img src="../_static/logo.svg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-gridtools">What Is GridTools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-and-use">Installation and Use</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-script">Simple Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-gridtools">Using GridTools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/user_manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal/internal.html">Internal Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GridTools</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/introduction/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<span id="id1"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-gridtools">
<h2>What Is GridTools<a class="headerlink" href="#what-is-gridtools" title="Permalink to this headline">¶</a></h2>
<p>The <cite>GridTools</cite> (GT) framework is a set of libraries and utilities to develop performance portable applications in which
stencil operations on grids are central. The focus of the project is on regular and block-structured grids as are
commonly found in the weather and climate application field. In this context, GT provides a useful level of abstraction
to enhance productivity and obtain excellent performance on a wide range of computer architectures. Additionally, it
addresses the challenges that arise from integration into production code, such as the expression of boundary
conditions, or conditional execution. The framework is structured such that it can be called from different weather
models (numerical weather and climate codes) or programming interfaces, and can target various computer architectures.
This is achieved by separating the GT core library in a user facing part (frontend) and architecture specific (backend)
parts. The core library also abstracts various possible data layouts and applies optimizations on stages with multiple
stencils. The core library is complemented by facilities to interoperate with other languages (such as C and Fortran),
to aid code development and a communication layer.</p>
<p><cite>GridTools</cite> provides optimized backends for GPUs and manycore architectures. Stencils can be run efficiently on different
architectures without any code change needed. Stencils can be built up by small composeable units called stages, using
<cite>GridTools</cite> domain-specific language. Such a functor can be as simple as being just a copy stencil, copying data from one field
to another:</p>
<div class="highlight-gridtools"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">copy_functor</span> <span class="p">{</span>
    <span class="k">using</span> <span class="n">in</span> <span class="o">=</span> <span class="k">in_accessor</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">out</span> <span class="o">=</span> <span class="k">inout_accessor</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="k">using</span> <span class="k">param_list</span> <span class="o">=</span> <span class="n">make_param_list</span><span class="o">&lt;</span><span class="n">in</span><span class="p">,</span> <span class="n">out</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Evaluation</span><span class="o">&gt;</span>
    <span class="cp">GT_FUNCTION</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">apply</span><span class="p">(</span><span class="n">Evaluation</span> <span class="n">eval</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">eval</span><span class="p">(</span><span class="n">out</span><span class="p">())</span> <span class="o">=</span> <span class="n">eval</span><span class="p">(</span><span class="n">in</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Several such stages can be composed into a computation and be applied on each grid-point of a grid. Requiring this
abstract descriptions of a stencils, the DSL allows <cite>GridTools</cite> can apply architecture-specific optimizations to the stencil
computations in order to be optimal on the target hardware.</p>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p><cite>GridTools</cite> requires at least a header-only installation of <a class="reference external" href="https://www.boost.org/">Boost</a>. Besides some boost utilities, it depends on <code class="docutils literal"><span class="pre">boost::mpl</span></code> and <code class="docutils literal"><span class="pre">boost::fusion</span></code>.</p>
<p>Additionally, <cite>GridTools</cite> requires a recent version of <a class="reference external" href="https://www.cmake.org/">CMake</a>.</p>
<p><cite>GridTools</cite> requires a modern compiler. A list of supported compilers can be found on <a class="reference external" href="https://github.com/GridTools/gridtools">github</a>.</p>
</div>
</div>
<div class="section" id="installation-and-use">
<span id="installation"></span><h2>Installation and Use<a class="headerlink" href="#installation-and-use" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simple-script">
<h3>Simple Script<a class="headerlink" href="#simple-script" title="Permalink to this headline">¶</a></h3>
<p>We first provide a sample of the commands needed to enable the multicore and CUDA backends, install them in <code class="docutils literal"><span class="pre">/usr/local</span></code>,
and run the gridtools tests.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>git clone http://github.com/eth-cscs/gridtools.git
<span class="nb">cd</span> gridtools
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake -DGT_ENABLE_BACKEND_MC<span class="o">=</span>ON -DGT_ENABLE_BACKEND_CUDA<span class="o">=</span>ON -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/usr/local ..
make install -j4
make <span class="nb">test</span>
</pre></div>
</div>
<p><cite>GridTools</cite> uses CMake as building system. The installation can be configured using <cite>ccmake</cite>. The following variables control the back-ends that will be supported by the runtime components of the installation, namely <a class="reference internal" href="../user_manual/user_manual.html#halo-exchanges"><span class="std std-ref">GCL</span></a>.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>GT_ENABLE_BACKEND_CUDA <span class="c1"># For CUDA GPUs</span>
GT_ENABLE_BACKEND_X86  <span class="c1"># For cache based multicores</span>
GT_ENABLE_BACKEND_NAIVE  <span class="c1"># For naive implementation</span>
GT_ENABLE_BACKEND_MC   <span class="c1"># For optimized multicores and KNL</span>
</pre></div>
</div>
<p>All the targets can be installed and used at the same time, but some runtime components may lead to incompatibilities or complex environments to make the codes run. It may be more effective to do multiple installs of the library for different targets in this case.</p>
<p>At the moment the only runtime component of <cite>GridTools</cite> is the GCL, the communication module. By default, this component will be installed in the system as a single-node mockery of the full distributed memory capability. To enable the full GCL you must set to <code class="docutils literal"><span class="pre">ON</span></code> the following variable</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>GT_USE_MPI
</pre></div>
</div>
<p>In addition, it may be convenient to install the library without compiling and running the tests, that use multiple nodes. To do so you can set to <code class="docutils literal"><span class="pre">ON</span></code> the following variable:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>GT_GCL_ONLY
</pre></div>
</div>
<p>Other variables can be useful for your system, and you can find their descriptions using <code class="docutils literal"><span class="pre">ccmake</span></code>.</p>
<p>When installing <cite>GridTools</cite> all the source codes of the components will be copied to the installation path. To avoid compiling and running tests for specific components, <cite>GridTools</cite> allows to enable or disable components using the following variables, with obvious meaning:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>INSTALL_BOUNDARY_CONDITIONS
INSTALL_DISTRIBUTED_BOUNDARIES
INSTALL_COMMON
INSTALL_STENCIL_COMPOSITION
INSTALL_STORAGE
INSTALL_C_BINDINGS
INSTALL_INTERFACE
INSTALL_TOOLS
</pre></div>
</div>
<p>To have access to these variables <code class="docutils literal"><span class="pre">INSTALL_ALL</span></code> should be set to <code class="docutils literal"><span class="pre">OFF</span></code>.</p>
<p>Examples can be installed by enabling <code class="docutils literal"><span class="pre">GT_INSTALL_EXAMPLES</span></code>. This will install the examples into the path given by
<code class="docutils literal"><span class="pre">GT_INSTALL_EXAMPLES_PATH</span></code>. The examples come with a standalone CMake project and can be built separately, e.g. with
the following set of instructions:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span><span class="nb">cd</span> examples
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake ..
make -j4
</pre></div>
</div>
</div>
<div class="section" id="using-gridtools">
<h3>Using GridTools<a class="headerlink" href="#using-gridtools" title="Permalink to this headline">¶</a></h3>
<p>Using <cite>GridTools</cite> follows standard CMake practices. To indicate where the <cite>GridTools</cite> can be found,
CMake should be provided with the variable <code class="docutils literal"><span class="pre">GridTools_DIR</span></code>,
e.g. by calling CMake with <code class="docutils literal"><span class="pre">-DGridTools_DIR=&lt;/path/to/gridtools/lib/cmake&gt;</span></code>.
The <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code> file should then contain the following lines:</p>
<p>__VERSION__</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">GridTools</span> <span class="s">VERSION</span> <span class="s">...</span> <span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">CMAKE_MODULE_PATH</span> <span class="s2">&quot;${GridTools_MODULE_PATH}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If GridTools uses the CUDA backend, you must call <code class="docutils literal"><span class="pre">enable_language(CUDA)</span></code> before finding the package.</p>
</div>
<p>Targets that need <cite>GridTools</cite> should link against <code class="docutils literal"><span class="pre">GridTools::gridtools</span></code>. If the communication module is needed <code class="docutils literal"><span class="pre">GridTools::gcl</span></code> should be used instead.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">my_library</span> <span class="s">source.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">my_library</span> <span class="s">PUBLIC</span> <span class="s">GridTools::gridtools</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Contributions to the <cite>GridTools</cite> set of libraries are welcome. However, our policy is that we will be the official maintainers and providers of the GridTools code. We believe that this will provide our users with a clear reference point for support and guarantees on timely interactions. For this reason, we require that external contributions to <cite>GridTools</cite> will be accepted after their authors provide to us a signed copy of a copyright release form to ETH Zurich.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../getting_started/getting_started.html" class="btn btn-neutral float-right" title="Getting Started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Indices and tables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ETH Zurich.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>